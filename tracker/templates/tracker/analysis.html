{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analysis</title>
    <link href="{% static 'tracker/css/output.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'tracker/css/style.css' %}">
    <link rel="stylesheet"  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="analyse.js"></script>
</head>
<body class="bg-green-50 font-sans" >
    <header class="w-full bg-custom-green pt-12 pb-24 px-6 rounded-b-[2.5rem] shadow-md">
        <div class="max-w-6xl mx-auto flex items-center gap-6 text-white">
            <a href="{% url 'dashboard' %}" class="w-12 h-12 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 transition">
                <i class="fa-solid fa-arrow-left text-xl"></i>
            </a>
            <div>
                <h1 class="text-4xl font-medium tracking-tight ">{% trans "Analysis" %}</h1>
                <p class="text-white/70 text-sm pt-2">{% trans "Clear insights. Better decisions." %}</p>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-6 py-5 -mt-16">
        <div class="bg-white rounded-2xl shadow-md p-8">
            <h2 class="text-green-700 font-semibold text-xl mb-4">
                {% trans "Spending by Category" %}
            </h2>
            <div class="space-y-4">
                {% for cat in categories %}
                    <div>
                        <div class="flex justify-between text-sm mb-1">
                            <span class="font-medium text-gray-700">
                                {{ cat.name }}
                            </span>
                            <span class="text-green-700 font-semibold">
                                ₹{{ cat.total }} ({{ cat.percent }}%)
                            </span>
                        </div>
                        <div class="w-full bg-green-100 rounded-full h-3 mt-2">
                            <div class="bg-custom-green h-3 rounded-full transition-all duration-500" style="width: {{ cat.percent }}%;">
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <p class="text-gray-500">{% trans 'No expense recorded yet.' %}</p>
                {% endfor %}
            </div>
        </div>
    </main>

    <div x-data="calenderApp()" x-init="init()">
        <section class="max-w-6xl mx-auto px-6 py-5">
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-white rounded-2xl shadow-md p-5">
                    <p class="text-gray-500">{% trans "Transactions" %}</p>
                    <h3 id="transactionCount" class="text-3xl
                     text-green-700 tetx-3xl font-semiboldbold mt-2">
                        <span x-text="transactions">{{ transactions }}</span>
                    </h3>
                </div>
                <div class="bg-white rounded-2xl shadow-md p-5">
                    <p class="text-gray-500">{% trans "Average" %}</p>
                    <h3 id="averageAmount" class="text-3xl text-green-700 tetx-3xl font-semibold mt-2">
                        ₹ <span x-text="totalSpent">{{ total_spent }}</span>
                    </h3>
                </div>
            </div>
        </section>
    </div>

    <script src="{% static 'tracker/js/dynamic_calender.js' %}"></script>
</body>
</html>